# GPU显存占用分析报告

## 测试环境
- GPU: NVIDIA GeForce RTX 3060 Laptop GPU
- CUDA计算能力: 8.6
- 总显存: 6.00 GB
- PyTorch版本: 2.7.1+cu118

## 模型信息
### VGG16
- 参数总量: 138,357,544 (138.36M)
- 模型类型: CNN
- 层数: 38

### T5 Transformer
- 参数总量: 60,506,624 (60.51M)
- 模型类型: Encoder-Decoder Transformer
- 编码器层数: 6
- 解码器层数: 6
- 注意力头数: 8
- 隐藏层维度: 512

### BERT
- 参数总量: 109,482,240 (109.48M)
- 模型类型: Encoder-only Transformer
- 层数: 12
- 注意力头数: 12
- 隐藏层维度: 768

## 显存测试结果

### VGG16 - 批次大小测试
| 批次大小 | 推理显存增加 (MB) |
|---------|----------------|
| 1 | 3.29 |
| 2 | 1.26 |
| 4 | 2.31 |
| 8 | 4.62 |
| 16 | 9.25 |
| 32 | 18.50 |

### T5 - 批次大小测试 (序列长度=64)
| 批次大小 | 推理显存增加 (MB) |
|---------|----------------|
| 1 | 1.77 |
| 2 | 3.54 |
| 4 | 7.09 |
| 8 | 14.18 |
| 16 | 28.39 |
| 8 | 14.18 |

### BERT - 批次大小测试 (序列长度=64)
| 批次大小 | 推理显存增加 (MB) |
|---------|----------------|
| 1 | 0.19 |
| 2 | 0.38 |
| 4 | 0.77 |
| 8 | 2.04 |
| 16 | 3.07 |
| 8 | 2.04 |

### T5 - 序列长度测试 (批次大小=8)
| 序列长度 | 推理显存增加 (MB) |
|---------|----------------|
| 64 | 14.18 |
| 16 | 4.42 |
| 32 | 7.67 |
| 64 | 14.18 |
| 128 | 27.18 |
| 256 | 53.20 |

### BERT - 序列长度测试 (批次大小=8)
| 序列长度 | 推理显存增加 (MB) |
|---------|----------------|
| 64 | 2.04 |
| 16 | 0.40 |
| 32 | 0.78 |
| 64 | 2.04 |
| 128 | 3.05 |
| 256 | 6.07 |

## 分析数据特性

### VGG16模型显存特性
- **单位批次显存增加**: 每增加一个样本，VGG16推理阶段平均增加显存 0.05MB。

### T5 Transformer模型显存特性
- **单位批次显存增加**: 在序列长度为64的情况下，每增加一个样本，T5推理阶段平均增加显存 1.77MB。

### BERT模型显存特性
- **单位批次显存增加**: 在序列长度为64的情况下，每增加一个样本，BERT推理阶段平均增加显存 0.21MB。
- **序列长度二次关系**: 拟合结果表明显存随序列长度的增长符合二次方程: 0.000000n² + 0.2032n + 1.17，
- **序列长度二次关系**: 拟合结果表明显存随序列长度的增长符合二次方程: -0.000018n² + 0.0278n + 0.07，

### VGG16、T5与BERT对比分析
- **参数效率对比**:
   - VGG16参数量: 138.36M
   - T5参数量: 60.51M
   - BERT参数量: 109.48M
   - T5/VGG16参数比: 0.44倍
   - BERT/VGG16参数比: 0.79倍
   - T5/BERT参数比: 0.55倍
- **基础显存效率对比**:
   - VGG16基础显存增加(batch=1): 3.29MB
   - T5基础显存增加(batch=1,seq=64): 1.77MB
   - BERT基础显存增加(batch=1,seq=64): 0.19MB
   - T5/VGG16显存比: 0.54倍
   - BERT/VGG16显存比: 0.06倍
   - T5/BERT显存比: 9.24倍
- **显存-参数比**:
   - VGG16显存/参数比: 0.02MB/M参数
   - T5显存/参数比: 0.03MB/M参数
   - BERT显存/参数比: 0.00MB/M参数